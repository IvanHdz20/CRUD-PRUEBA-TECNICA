{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useProductoStore } from \"../stores/productosStore\";\nimport ProductoTable from \"../components/ProductoTable.vue\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    ProductoTable,\n    ModalConfirm\n  },\n  setup() {\n    const store = useProductoStore();\n    const router = useRouter();\n    const modal = ref(null);\n    const idEliminar = ref(null);\n    onMounted(() => {\n      store.obtenerProductos();\n    });\n    const irCrear = () => router.push(\"/crear\");\n    const irEditar = producto => {\n      if (!producto || !producto.Id) {\n        console.error(\"Producto inválido o sin Id:\", producto);\n        alert(\"No se puede editar este producto. Id no encontrado.\");\n        return;\n      }\n      router.push(`/editar/${producto.Id}`);\n    };\n    const confirmarEliminar = id => {\n      idEliminar.value = id;\n      modal.value.abrir();\n    };\n    const eliminarConfirmado = async () => {\n      await store.eliminarProducto(idEliminar.value);\n      await store.obtenerProductos();\n    };\n    return {\n      store,\n      irCrear,\n      irEditar,\n      confirmarEliminar,\n      eliminarConfirmado,\n      modal\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","useProductoStore","ProductoTable","ModalConfirm","useRouter","name","components","setup","store","router","modal","idEliminar","obtenerProductos","irCrear","push","irEditar","producto","Id","console","error","alert","confirmarEliminar","id","value","abrir","eliminarConfirmado","eliminarProducto"],"sources":["C:\\Users\\Elpap\\OneDrive\\Desktop\\CRUD\\productos-vue\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <h1 class=\"text-h4 mb-4\">Gestión de Productos</h1>\r\n\r\n    <ProductoTable\r\n      :productos=\"store.productos\"\r\n      @crear=\"irCrear\"\r\n      @editar=\"irEditar\"\r\n      @eliminar=\"confirmarEliminar\"\r\n    />\r\n\r\n    <ModalConfirm\r\n      ref=\"modal\"\r\n      mensaje=\"¿Estás seguro de eliminar este producto?\"\r\n      @confirmar=\"eliminarConfirmado\"\r\n    />\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useProductoStore } from \"../stores/productosStore\";\r\nimport ProductoTable from \"../components/ProductoTable.vue\";\r\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"HomeView\",\r\n  components: { ProductoTable, ModalConfirm },\r\n  setup() {\r\n    const store = useProductoStore();\r\n    const router = useRouter();\r\n    const modal = ref(null);\r\n    const idEliminar = ref(null);\r\n\r\n    onMounted(() => {\r\n      store.obtenerProductos();\r\n    });\r\n\r\n    const irCrear = () => router.push(\"/crear\");\r\n    const irEditar = (producto) => {\r\n  if (!producto || !producto.Id) {\r\n    console.error(\"Producto inválido o sin Id:\", producto);\r\n    alert(\"No se puede editar este producto. Id no encontrado.\");\r\n    return;\r\n  }\r\n  router.push(`/editar/${producto.Id}`);\r\n};\r\n\r\n\r\n\r\n\r\n    const confirmarEliminar = (id) => {\r\n      idEliminar.value = id;\r\n      modal.value.abrir();\r\n    };\r\n\r\n    const eliminarConfirmado = async () => {\r\n      await store.eliminarProducto(idEliminar.value);\r\n      await store.obtenerProductos();\r\n    };\r\n\r\n    return { store, irCrear, irEditar, confirmarEliminar, eliminarConfirmado, modal };\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";AAoBA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,SAASC,gBAAe,QAAS,0BAA0B;AAC3D,OAAOC,aAAY,MAAO,iCAAiC;AAC3D,OAAOC,YAAW,MAAO,gCAAgC;AACzD,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IAAEJ,aAAa;IAAEC;EAAa,CAAC;EAC3CI,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIP,gBAAgB,CAAC,CAAC;IAChC,MAAMQ,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,MAAMM,KAAI,GAAIX,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMY,UAAS,GAAIZ,GAAG,CAAC,IAAI,CAAC;IAE5BC,SAAS,CAAC,MAAM;MACdQ,KAAK,CAACI,gBAAgB,CAAC,CAAC;IAC1B,CAAC,CAAC;IAEF,MAAMC,OAAM,GAAIA,CAAA,KAAMJ,MAAM,CAACK,IAAI,CAAC,QAAQ,CAAC;IAC3C,MAAMC,QAAO,GAAKC,QAAQ,IAAK;MACjC,IAAI,CAACA,QAAO,IAAK,CAACA,QAAQ,CAACC,EAAE,EAAE;QAC7BC,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEH,QAAQ,CAAC;QACtDI,KAAK,CAAC,qDAAqD,CAAC;QAC5D;MACF;MACAX,MAAM,CAACK,IAAI,CAAC,WAAWE,QAAQ,CAACC,EAAE,EAAE,CAAC;IACvC,CAAC;IAKG,MAAMI,iBAAgB,GAAKC,EAAE,IAAK;MAChCX,UAAU,CAACY,KAAI,GAAID,EAAE;MACrBZ,KAAK,CAACa,KAAK,CAACC,KAAK,CAAC,CAAC;IACrB,CAAC;IAED,MAAMC,kBAAiB,GAAI,MAAAA,CAAA,KAAY;MACrC,MAAMjB,KAAK,CAACkB,gBAAgB,CAACf,UAAU,CAACY,KAAK,CAAC;MAC9C,MAAMf,KAAK,CAACI,gBAAgB,CAAC,CAAC;IAChC,CAAC;IAED,OAAO;MAAEJ,KAAK;MAAEK,OAAO;MAAEE,QAAQ;MAAEM,iBAAiB;MAAEI,kBAAkB;MAAEf;IAAM,CAAC;EACnF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}