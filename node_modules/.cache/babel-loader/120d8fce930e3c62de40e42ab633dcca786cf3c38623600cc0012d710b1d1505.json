{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport ProductoForm from \"../components/ProductoForm.vue\";\nimport { getProductoPorId, editarProducto } from \"../services/productos.js\";\nexport default {\n  name: \"EditarProductoView\",\n  components: {\n    ProductoForm\n  },\n  setup() {\n    const producto = ref(null);\n    const cargando = ref(true);\n    const router = useRouter();\n    const route = useRoute();\n\n    // Cargar el producto\n    const cargarProducto = async () => {\n      try {\n        const data = await getProductoPorId(route.params.id);\n        producto.value = {\n          ...data\n        };\n      } catch (err) {\n        console.error(err);\n        alert(err.message);\n        router.push(\"/\");\n      } finally {\n        cargando.value = false;\n      }\n    };\n\n    // Guardar producto editado\n    const guardar = async prodEditado => {\n      try {\n        // ⚠️ Asegurarse de que prodEditado incluye el Id\n        prodEditado.Id = producto.value.Id;\n        await editarProducto(prodEditado);\n        alert(\"Producto actualizado correctamente\");\n        router.push(\"/\");\n      } catch (err) {\n        console.error(err);\n        alert(\"Error al editar producto\");\n      }\n    };\n    const irHome = () => router.push(\"/\");\n    onMounted(() => {\n      cargarProducto();\n    });\n    return {\n      producto,\n      cargando,\n      guardar,\n      irHome\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","useRoute","ProductoForm","getProductoPorId","editarProducto","name","components","setup","producto","cargando","router","route","cargarProducto","data","params","id","value","err","console","error","alert","message","push","guardar","prodEditado","Id","irHome"],"sources":["C:\\Users\\Elpap\\OneDrive\\Desktop\\CRUD\\productos-vue\\src\\views\\EditarProductoView.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <h1 class=\"text-h4 mb-4\">Editar Producto</h1>\r\n\r\n    <div v-if=\"cargando\">Cargando producto...</div>\r\n\r\n    <ProductoForm\r\n      v-else\r\n      :producto-inicial=\"producto\"\r\n      modo=\"editar\"\r\n      @guardar=\"guardar\"\r\n      @cancelar=\"irHome\"\r\n    />\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport ProductoForm from \"../components/ProductoForm.vue\";\r\nimport { getProductoPorId, editarProducto } from \"../services/productos.js\";\r\n\r\nexport default {\r\n  name: \"EditarProductoView\",\r\n  components: { ProductoForm },\r\n  setup() {\r\n    const producto = ref(null);\r\n    const cargando = ref(true);\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n\r\n    // Cargar el producto\r\n    const cargarProducto = async () => {\r\n  try {\r\n    const data = await getProductoPorId(route.params.id);\r\n    producto.value = { ...data };\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n    router.push(\"/\");\r\n  } finally {\r\n    cargando.value = false;\r\n  }\r\n};\r\n\r\n\r\n    // Guardar producto editado\r\n    const guardar = async (prodEditado) => {\r\n      try {\r\n        // ⚠️ Asegurarse de que prodEditado incluye el Id\r\n        prodEditado.Id = producto.value.Id;\r\n        await editarProducto(prodEditado);\r\n        alert(\"Producto actualizado correctamente\");\r\n        router.push(\"/\");\r\n      } catch (err) {\r\n        console.error(err);\r\n        alert(\"Error al editar producto\");\r\n      }\r\n    };\r\n\r\n    const irHome = () => router.push(\"/\");\r\n\r\n    onMounted(() => {\r\n      cargarProducto();\r\n    });\r\n\r\n    return { producto, cargando, guardar, irHome };\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";AAiBA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAY;AAChD,OAAOC,YAAW,MAAO,gCAAgC;AACzD,SAASC,gBAAgB,EAAEC,cAAa,QAAS,0BAA0B;AAE3E,eAAe;EACbC,IAAI,EAAE,oBAAoB;EAC1BC,UAAU,EAAE;IAAEJ;EAAa,CAAC;EAC5BK,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIV,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMW,QAAO,GAAIX,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMY,MAAK,GAAIV,SAAS,CAAC,CAAC;IAC1B,MAAMW,KAAI,GAAIV,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMW,cAAa,GAAI,MAAAA,CAAA,KAAY;MACrC,IAAI;QACF,MAAMC,IAAG,GAAI,MAAMV,gBAAgB,CAACQ,KAAK,CAACG,MAAM,CAACC,EAAE,CAAC;QACpDP,QAAQ,CAACQ,KAAI,GAAI;UAAE,GAAGH;QAAK,CAAC;MAC9B,EAAE,OAAOI,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;QAClBG,KAAK,CAACH,GAAG,CAACI,OAAO,CAAC;QAClBX,MAAM,CAACY,IAAI,CAAC,GAAG,CAAC;MAClB,UAAU;QACRb,QAAQ,CAACO,KAAI,GAAI,KAAK;MACxB;IACF,CAAC;;IAGG;IACA,MAAMO,OAAM,GAAI,MAAOC,WAAW,IAAK;MACrC,IAAI;QACF;QACAA,WAAW,CAACC,EAAC,GAAIjB,QAAQ,CAACQ,KAAK,CAACS,EAAE;QAClC,MAAMrB,cAAc,CAACoB,WAAW,CAAC;QACjCJ,KAAK,CAAC,oCAAoC,CAAC;QAC3CV,MAAM,CAACY,IAAI,CAAC,GAAG,CAAC;MAClB,EAAE,OAAOL,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;QAClBG,KAAK,CAAC,0BAA0B,CAAC;MACnC;IACF,CAAC;IAED,MAAMM,MAAK,GAAIA,CAAA,KAAMhB,MAAM,CAACY,IAAI,CAAC,GAAG,CAAC;IAErCvB,SAAS,CAAC,MAAM;MACda,cAAc,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO;MAAEJ,QAAQ;MAAEC,QAAQ;MAAEc,OAAO;MAAEG;IAAO,CAAC;EAChD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}